(this.webpackJsonpfitnessTracker=this.webpackJsonpfitnessTracker||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var c=n(7),a=n(0),r=n(11),o=n.n(r),s=n(30),i=n(13);function j(e){localStorage.setItem("token",JSON.stringify(e))}var u=n(9),l=n.n(u),b=n(16),O=n(20),h=n.n(O),d="https://fitnesstrac-kr.herokuapp.com/api/";localStorage.getItem("token");function f(){return(f=Object(b.a)(l.a.mark((function e(t,n){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("".concat(d,"users/login"),{username:t,password:n});case 3:c=e.sent,console.log(c),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}n(94);var p=n(148),x=n(149),m=(n(95),n(2)),g="https://fitnesstrac-kr.herokuapp.com/api/",v=function(){var e=Object(a.useState)(),t=Object(c.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(),s=Object(c.a)(o,2),i=s[0],u=s[1];function O(){return(O=Object(b.a)(l.a.mark((function e(){var t,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(g,"/users/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:i})});case 3:return t=e.sent,e.next=6,t.json();case 6:return c=e.sent,console.log(c),e.next=10,c.token;case 10:j(e.sent),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}return Object(m.jsxs)("form",{id:"form",noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),function(){O.apply(this,arguments)}()},children:[Object(m.jsx)(p.a,{id:"username",label:"Username",onInput:function(e){r(e.target.value)}}),Object(m.jsx)(p.a,{id:"password",type:"password",label:"Password",onInput:function(e){u(e.target.value)}}),Object(m.jsx)(x.a,{type:"submit",children:"Register"})]})},S=(n(100),function(){var e=Object(a.useState)(),t=Object(c.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(),s=Object(c.a)(o,2),i=s[0],j=s[1],u=Object(a.useState)(),O=Object(c.a)(u,2),d=O[0],f=O[1],g=function(){var e=Object(b.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("".concat("https://fitnesstrac-kr.herokuapp.com/api/","users/login"),{username:n,password:i}).then((function(e){var t=e.data.token;t?(localStorage.setItem("token",JSON.stringify(t)),window.location.href="".concat(window.location.origin,"/home")):f("Something went horribly wrong")})).catch((function(e){console.log(e),f("Something went horribly wrong")}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)(m.Fragment,{children:[d,Object(m.jsxs)("form",{id:"form",noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),g()},children:[Object(m.jsx)(p.a,{id:"username",label:"Username",onInput:function(e){r(e.target.value)}}),Object(m.jsx)(p.a,{id:"password",type:"password",label:"Password",onInput:function(e){j(e.target.value)}}),Object(m.jsx)(x.a,{type:"submit",children:"LOGIN"})]})]})}),k=(n(101),function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{id:"title",children:"Welcome to my Fitness TrackR"}),Object(m.jsx)(v,{}),Object(m.jsx)(S,{})]})}),y=function(e){var t=e.currentUser,n=e.setCurrentUser,r=Object(a.useState)(),o=Object(c.a)(r,2);o[0],o[1];return Object(m.jsxs)("header",{children:[Object(m.jsx)("h1",{children:"Fitness TrackR"}),Object(m.jsx)("nav",{className:"user-select",children:t?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(s.b,{to:"/Home",activeClassName:"current",children:"Home"}),Object(m.jsx)(s.b,{to:"/Activities",activeClassName:"current",children:"Activities"}),Object(m.jsx)(s.b,{to:"/Routines",activeClassName:"current",children:"Routines"}),Object(m.jsx)(s.b,{to:"/MyRoutines",activeClassName:"current",children:"MyRoutines"}),Object(m.jsxs)("button",{onClick:function(e){localStorage.removeItem("token"),n(!1)},children:["LOG OUT",t.username]})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(e){window.location.href=Object(m.jsx)(k,{}),function(e,t){f.apply(this,arguments)}()},children:"LOG IN"}),Object(m.jsx)("button",{onClick:function(e){window.location.href=Object(m.jsx)(k,{}),n(!0)},children:"Register"})]})})]})},w=(n(60),n(139)),C=n(138),N=n(140),I=n(141),R=n(142),T=n(143),J=n(144),A=JSON.parse(localStorage.getItem("token"));console.log(A);var P=function(){var e=Object(a.useState)(),t=Object(c.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(),s=Object(c.a)(o,2),i=s[0],j=s[1],u=Object(a.useState)([]),O=Object(c.a)(u,2),h=(O[0],O[1],function(){var e=Object(b.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://fitnesstrac-kr.herokuapp.com/api/","activities"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(A)},body:JSON.stringify({name:n,description:i})}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch(console.error);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return Object(m.jsx)("div",{children:Object(m.jsxs)("form",{id:"form",noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),console.log(e),h()},children:[Object(m.jsx)(p.a,{id:"name",label:"name",onInput:function(e){r(e.target.value)}}),Object(m.jsx)(p.a,{id:"description",label:"description",onInput:function(e){j(e.target.value)}}),Object(m.jsx)(x.a,{type:"submit",children:"Create Activity"})]})})},F=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){h.a.get("".concat("https://fitnesstrac-kr.herokuapp.com/api/","activities")).then((function(e){var t=e.data;t.length&&r(t)}))}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{children:"Activities Page"}),Object(m.jsx)(P,{}),Object(m.jsx)(w.a,{component:C.a,children:Object(m.jsxs)(N.a,{children:[Object(m.jsx)(I.a,{children:Object(m.jsxs)(R.a,{children:[Object(m.jsx)(T.a,{align:"left",children:"ID"}),Object(m.jsx)(T.a,{align:"left",children:"Name"}),Object(m.jsx)(T.a,{align:"left",children:"Description"})]})}),Object(m.jsx)(J.a,{children:n.map((function(e){return Object(m.jsxs)(R.a,{children:[Object(m.jsx)(T.a,{component:"th",scope:"row",children:e.id}),Object(m.jsx)(T.a,{align:"left",children:e.name}),Object(m.jsx)(T.a,{align:"left",children:e.description})]},e.name)}))})]})})]})},D=(n(104),function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){h.a.get("".concat("https://fitnesstrac-kr.herokuapp.com/api/","routines")).then((function(e){var t=e.data;t.length&&r(t)}))}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{children:"Routines Page"}),Object(m.jsx)(w.a,{component:C.a,children:Object(m.jsxs)(N.a,{children:[Object(m.jsx)(I.a,{children:Object(m.jsxs)(R.a,{children:[Object(m.jsx)(T.a,{align:"left",children:"ID"}),Object(m.jsx)(T.a,{align:"left",children:"Name"}),Object(m.jsx)(T.a,{align:"left",children:"Goal"}),Object(m.jsx)(T.a,{align:"left",children:"CreatorName"})]})}),Object(m.jsx)(J.a,{children:n.map((function(e){return Object(m.jsxs)(R.a,{children:[Object(m.jsx)(T.a,{component:"th",scope:"row",children:e.id}),Object(m.jsx)(T.a,{align:"left",children:e.name}),Object(m.jsx)(T.a,{align:"left",children:e.goal}),Object(m.jsx)(T.a,{align:"left",children:e.creatorName})]},e.name)}))})]})})]})}),E=n(65),B=JSON.parse(localStorage.getItem("token")),U=function(){var e=Object(a.useState)(),t=Object(c.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(),s=Object(c.a)(o,2),i=s[0],j=s[1],u=Object(a.useState)([]),O=Object(c.a)(u,2),h=(O[0],O[1],Object(a.useState)(!0)),d=Object(c.a)(h,2),f=d[0],g=(d[1],function(){var e=Object(b.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://fitnesstrac-kr.herokuapp.com/api/","/routines"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(B)},body:JSON.stringify({name:n,goal:i,isPublic:f})}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch(console.error);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return Object(m.jsxs)("div",{id:"main",children:[Object(m.jsx)("h1",{children:"My Routines"}),Object(m.jsxs)("form",{id:"form",noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),g()},children:[Object(m.jsx)(p.a,{id:"name",label:"name",onInput:function(e){r(e.target.value)}}),Object(m.jsx)(p.a,{id:"goal",label:"goal",onInput:function(e){j(e.target.value)}}),Object(m.jsx)(x.a,{type:"submit",children:"Create Routine"})]})]})},z=n(145),G=n(146),L=n(147),V=function(e){var t=e.routine,n=t.id,r=t.name,o=t.goal,s=t.creatorName,i=t.isPublic,j=e.onRemoveRoutine,u="https://fitnesstrac-kr.herokuapp.com/api/",l=JSON.parse(localStorage.getItem("token")),b=Object(a.useState)(r),O=Object(c.a)(b,2),h=O[0],d=O[1],f=Object(a.useState)(o),x=Object(c.a)(f,2),g=x[0],v=x[1],S=Object(a.useState)(!1),k=Object(c.a)(S,2),y=k[0],w=k[1];return Object(m.jsxs)(R.a,{children:[Object(m.jsx)(T.a,{component:"th",scope:"row",children:n}),Object(m.jsx)(T.a,{align:"left",children:y?Object(m.jsx)(p.a,{value:h,onChange:function(e){d(e.target.value)}}):h}),Object(m.jsx)(T.a,{align:"left",children:y?Object(m.jsx)(p.a,{value:g,onChange:function(e){v(e.target.value)}}):g}),Object(m.jsx)(T.a,{align:"left",children:s}),Object(m.jsx)(T.a,{align:"left",children:i}),Object(m.jsx)(T.a,{align:"left",children:y?Object(m.jsx)(z.a,{style:{cursor:"pointer"},onClick:function(){!function(e){w(!1),fetch("".concat(u,"routines/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({name:h,goal:g})}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch(console.error)}(n)}}):Object(m.jsx)(G.a,{style:{cursor:"pointer"},onClick:function(){w(!0)}})}),Object(m.jsx)(T.a,{align:"left",children:Object(m.jsx)(L.a,{onClick:function(){!function(e){j(),fetch("".concat(u,"routines/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch(console.error)}(n)}})})]},n)},H=(n(105),"https://fitnesstrac-kr.herokuapp.com/api/"),M=JSON.parse(localStorage.getItem("token")),W=function(e){try{return h.a.get("".concat(H,"users/me"),{headers:{"content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.data.username}))}catch(t){console.error(t)}},q=function(e,t){try{return h.a.get("".concat(H,"users/").concat(e,"/routines"),{headers:{"content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.data}))}catch(n){console.error(n)}},K=function(){var e,t=Object(a.useState)([]),n=Object(c.a)(t,2),r=n[0],o=n[1];Object(a.useEffect)(Object(b.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!M){t.next=8;break}return t.next=3,W(M);case 3:return e=t.sent,t.next=6,q(e,M);case 6:n=t.sent,o(n);case 8:case"end":return t.stop()}}),t)}))),[]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(U,{}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),Object(m.jsx)(w.a,{component:C.a,children:Object(m.jsxs)(N.a,{children:[Object(m.jsx)(I.a,{children:Object(m.jsxs)(R.a,{children:[Object(m.jsx)(T.a,{align:"left",children:"ID"}),Object(m.jsx)(T.a,{align:"left",children:"Name"}),Object(m.jsx)(T.a,{align:"left",children:"Goal"}),Object(m.jsx)(T.a,{align:"left",children:"Creator Name"}),Object(m.jsx)(T.a,{align:"left",children:"Is Public"}),Object(m.jsx)(T.a,{align:"right",children:" Edit / Delete"})]})}),Object(m.jsx)(J.a,{children:r&&r.map((function(e,t){return Object(m.jsx)(V,{routine:e,onRemoveRoutine:function(){!function(e){var t=Object(E.a)(r);t.splice(e,1),o(t)}(t)}},e.id)}))})]})})]})},Q=(n(106),function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],r=(t[1],Object(a.useState)([])),o=Object(c.a)(r,2),j=o[0],u=o[1],l=Object(a.useState)([]),b=Object(c.a)(l,2),O=(b[0],b[1],Object(a.useState)([])),h=Object(c.a)(O,2),d=(h[0],h[1],Object(a.useState)([{id:"",name:"",description:""}])),f=Object(c.a)(d,2),p=(f[0],f[1],Object(a.useState)([])),x=Object(c.a)(p,2),g=(x[0],x[1],Object(a.useState)([{id:"",creatorId:"",isPublic:!0,name:"",goal:"",creatorName:"",activities:[]}])),v=Object(c.a)(g,2),S=(v[0],v[1],Object(a.useState)(!1)),w=Object(c.a)(S,2),C=(w[0],w[1]);return Object(a.useEffect)((function(){JSON.parse(localStorage.getItem("token"))?C(!0):C(!1)})),Object(m.jsx)(s.a,{children:Object(m.jsxs)("div",{id:"App",children:[Object(m.jsx)(y,{userList:n,currentUser:j,setCurrentUser:u}),j?Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(i.d,{children:[Object(m.jsx)(i.b,{path:"/home",children:Object(m.jsx)(k,{})}),Object(m.jsx)(i.b,{path:"/activities",children:Object(m.jsx)(F,{})}),Object(m.jsx)(i.b,{path:"/routines",children:Object(m.jsx)(D,{})}),Object(m.jsx)(i.b,{path:"/myRoutines",children:Object(m.jsx)(K,{})}),Object(m.jsx)(i.b,{exact:!0,path:"/login",children:Object(m.jsx)("h2",{style:{padding:".5em"}})}),Object(m.jsx)(i.a,{to:"/home"})]})}):Object(m.jsxs)(i.d,{children:[Object(m.jsx)(i.b,{path:"/",children:Object(m.jsx)("h2",{style:{padding:".5em"},children:"Welcome to Fitness TrackR...log in or register above."})}),Object(m.jsx)(i.a,{to:"/myRoutines"})]})]})})});o.a.render(Object(m.jsx)(Q,{}),document.getElementById("root"))},60:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){}},[[107,1,2]]]);
//# sourceMappingURL=main.697e821d.chunk.js.map